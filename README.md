# lab_6_refactoring
## Проблемы, которые были в файле order_processing.py: 
1. Функция process_checkout слишком большая и выполняет слишком много разных задач:
   
     валидация, расчет скидок, налогов и генерация ID заказа
3. В коде используются числа без пояснений:
  * процент налога 0.21
  * пороги для скидок 200, 100
  * проценты скидок 0.10, 0.20, 0.05
  * фиксированные скидки 50, 10
3. Есть дублирования кода
4. Сложночитаемый код расчета скидок
5. Есть смешение уровней абстракции

## Примененный рефакторинг:
1. Были выделены константы и использованы далее в коде:
  *   вынесены все магические числа в именованные константы
  *   созданы константы для налогов, скидок и пороговых значений
2. Были выделены функции:
  * validate_request() - вынесена валидация входных данных
  * calculate_subtotal() - вынесен расчет суммы заказа
  * calculate_discount() - вынесена логика расчета скидок
  * calculate_tax() - вынесен расчет налога
  * generate_order_id() - вынесена генерация ID заказа
3. Были упрощены условные выражения:
   *логика скидок переписана с использованием словаря для кодов купонов
4. Код был упорядочен, теперь его можно читать как сценарий, и все функции вызываются в логическом порядке

## Что стало проще и лучше:
  * логика скидок теперь сосредоточена в словаре COUPON_RULES, что делает добавление новых купонов простым и безопасным
  * все числовые значения теперь имеют имена, что делает код легкочитаемым
  * теперь легко поменять налоговую ставку, просто поменяв значение TAX_RATE
  * смена валюты, путем изменения DEFAULT_CURRENCY
  * можно изменить валидацию (validate_request()) без влияния на бизнес-логику
  * появились новые функции, которые могут быть использованы в дальнейшем
  * улучшилась читаемость кода
